<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en"
      xmlns:tal="http://xml.zope.org/namespaces/tal"
      xmlns:metal="http://xml.zope.org/namespaces/metal"
      xmlns:i18n="http://xml.zope.org/namespaces/i18n"
      lang="en"
      metal:use-macro="here/main_template/macros/master"
      i18n:domain="collective.tablepage">

<body>

<metal:main fill-slot="main">
    <tal:main-macro metal:define-macro="main"
	    tal:define="text here/getText;">

       <div tal:replace="structure provider:plone.abovecontenttitle" />

        <h1 class="documentFirstHeading"> 
            <metal:field use-macro="python:here.widget('title', mode='view')">
            Title
            </metal:field>
        </h1>

        <div tal:replace="structure provider:plone.belowcontenttitle" />

        <p class="documentDescription">
            <metal:field use-macro="python:here.widget('description', mode='view')">
            Description
            </metal:field>
        </p>

        <div tal:replace="structure provider:plone.abovecontentbody" />

        <metal:body define-macro="body">


			<div tal:define="portal_url view/portal_url;
                             headers view/headers;
                             cssClasses python:' '.join(context.getCssClasses());
							 rows view/rows;"
			     tal:attributes="class python: cssClasses and cssClasses + ' multiTablePage' or 'multiTablePage'">
				
		    <tal:tables tal:condition="python:len(rows)>0">

        		<h2 tal:condition="context/getTableCaption"
                  		 tal:content="context/getTableCaption">This table is for...</h2>
				
				<tal:rows tal:repeat="row rows">

				<h3 class="multiTablePageRowHeader"
				     tal:condition="python:view.is_label(row)"
					 tal:content="python:view.is_label(row)">
					Section Foo
				</h3>
				
				<table class="multiTablePageRowData listing"
				       tal:condition="python:not view.is_label(row)">
				
					<tal:sub-table-rows repeat="data row">
					<tr tal:define="col_index repeat/data/index">
						<th scope="row" class="nosort"
						    tal:define="header python:view.getHeader(col_index)">
						    	<span tal:replace="header/label" />
								<div class="discreet" tal:content="header/description">This is for...</div>
						    </th>
						<td class="nosort" tal:content="structure data">aaa</td>
					</tr>
					</tal:sub-table-rows>
				
				</table>
				
				</tal:rows>

			</tal:tables>
				
			</div>

<!--table class="listing tablePage"

    <tbody>
        <tal:rows repeat="row rows">
        <tr tal:define="even repeat/row/even;
                        row_index repeat/row/index;
						next_is_label python:view.next_is_label(row_index);
						is_data_row python:not view.is_label(row_index)"
            tal:attributes="class python:even and 'odd' or 'even'">
            <td tal:condition="python:view.edit_mode and is_data_row">
                <input class="selectRow" type="checkbox" name="row-index:int:list" value=""
                       tal:condition="python:has_tablemanager_permission or view.mine_row(row_index)"
                       tal:attributes="value repeat/row/index" />
            </td>
            <td tal:condition="is_data_row"
			    tal:repeat="cell row">
                <span tal:replace="structure cell" />
            </td>
			<td tal:condition="not:is_data_row"
			    scope="col" class="tablePageSubHeader" colspan=""
				tal:attributes="colspan python:len(headers) + (view.edit_mode and 1 or 0)"
				tal:content="row">
				Section header
			</td>
            <td class="rowCommands"
                tal:condition="view/edit_mode">
                <a class="command" href="" title="Add new row below this"
                   i18n:attributes="title"
				   tal:condition="python: next_is_label and repeat['row'].end"
                   tal:attributes="href string:${context/absolute_url}/@@edit-record">
                    <img alt="Add new row below" src=""
                         i18n:attributes="alt"
                         tal:attributes="src string:${view/portal_url}/++resource++collective.tablepage.images/add.png" />
                </a>
                <a class="command" href="" title="Add new row below this"
                   i18n:attributes="title"
				   tal:condition="python: next_is_label and not repeat['row'].end"
                   tal:attributes="href string:${context/absolute_url}/@@edit-record?row-index:int=${repeat/row/index}&addRow=1">
                    <img alt="Add new row" src=""
                         i18n:attributes="alt"
                         tal:attributes="src string:${view/portal_url}/++resource++collective.tablepage.images/add.png" />
                </a>
                <tal:mine-or-editor condition="python: has_tablemanager_permission or view.mine_row(row_index)">
                    <a class="command" href="" title="Edit row"
					   tal:condition="is_data_row"
                       i18n:attributes="title"
                       tal:attributes="href string:${context/absolute_url}/@@edit-record?row-index:int=${repeat/row/index}">
                        <img alt="Edit row" src=""
                             i18n:attributes="alt"
                             tal:attributes="src string:${portal_url}/++resource++collective.tablepage.images/edit.png" />
                    </a>
                    <a class="command" href="" title="Edit label"
					   tal:condition="not:is_data_row"					
                       i18n:attributes="title"
                       tal:attributes="href string:${context/absolute_url}/@@edit-label?row-index:int=${repeat/row/index}">
                        <img alt="Edit label" src=""
                             i18n:attributes="alt"
                             tal:attributes="src string:${portal_url}/++resource++collective.tablepage.images/edit.png" />
                    </a>
	                <a class="command" href="" title="Add new label above"
					   tal:condition="can_add_label"
	                   i18n:attributes="title"
	                   tal:attributes="href string:${context/absolute_url}/@@edit-label?row-index:int=${repeat/row/index}&addLabel=1">
	                    <img alt="Add new label above that row" src=""
	                         i18n:attributes="alt"
	                         tal:attributes="src string:${view/portal_url}/++resource++collective.tablepage.images/labeling.png" />
	                </a>
                    <a class="command" href="" title="Remove row"
                       i18n:attributes="title"
                       tal:attributes="href string:${context/absolute_url}/@@delete-record?row-index:int=${repeat/row/index}">
                        <img alt="Remove row" src=""
                             i18n:attributes="alt"
                             tal:attributes="src string:${portal_url}/++resource++collective.tablepage.images/remove.png" />
                    </a>
                </tal:mine-or-editor>
                <tal:manager-or-mine condition="has_tablemanager_permission">
                    <a class="command" href="" title="Move row up"
                       i18n:attributes="title"
                       tal:condition="not:repeat/row/start"
                       tal:attributes="href string:${context/absolute_url}/@@move-record?row-index:int=${row_index}&amp;direction=up">
                        <img alt="Move row up" src=""
                             i18n:attributes="alt"
                             tal:attributes="src string:${portal_url}/++resource++collective.tablepage.images/move_up.png" />
                    </a>
                    <a class="command" href="" title="Move row down"
                       i18n:attributes="title"
                       tal:condition="not:repeat/row/end"
                       tal:attributes="href string:${context/absolute_url}/@@move-record?row-index:int=${row_index}&amp;direction=down">
                        <img alt="Move row down" src=""
                             i18n:attributes="alt"
                             tal:attributes="src string:${portal_url}/++resource++collective.tablepage.images/move_down.png" />
                    </a>
                </tal:manager-or-mine>
            </td>
        </tr>
        </tal:rows>
        <tr class="noResults" tal:condition="not: rows">
            <td tal:attributes="colspan python:len(headers) - (view.edit_mode and 1 or 0)"
                i18n:translate="">
                No rows
            </td>
			<td class="rowCommands"
			    tal:condition="python: view.edit_mode and context.getPageColumns()">
            <a class="command" href="" title="Add new row"
               i18n:attributes="title"
               tal:attributes="href string:${context/absolute_url}/@@edit-record">
                <img alt="Add new row" src=""
                     i18n:attributes="alt"
                     tal:attributes="src string:${view/portal_url}/++resource++collective.tablepage.images/add.png" />
            </a>

			</td>
        </tr>
    </tbody>
</table-->


        </metal:body>

        <div tal:replace="structure provider:plone.belowcontentbody" />

    </tal:main-macro>
</metal:main>

</body>
</html>

